% Remember to use the lgrind style

\File{\1u0\1usystem\1software\1u++\-7.0.0\1src\1examples\1SemaphoreBB.cc},{13:33},{Nov 12 2020}
\L{\LB{\C{}\1\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\-\*\-\0Mode:\0C++\0\-\*\-\0}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0uC++\0Version\07.0.0,\0Copyright\0(C)\0Peter\0A.\0Buhr\01994}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0SemaphoreBB.cc\0\-\-\0}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0Author\0\0\0\0\0\0\0\0\0\0\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Created\0On\0\0\0\0\0\0\0:\0Thu\0Aug\015\016:42:42\01991}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0By\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0On\0:\0Thu\0Nov\012\013:33:14\02020}}
\CE{}\L{\LB{\C{}\1\1\0Update\0Count\0\0\0\0\0:\060}}
\CE{}\L{\LB{\C{}\1\1}}
\CE{}\L{\LB{\C{}\1\1\0This\0\0library\0is\0free\0\0software;\0you\0\0can\0redistribute\0\0it\0and\1or\0\0modify\0it}}
\CE{}\L{\LB{\C{}\1\1\0under\0the\0terms\0of\0the\0GNU\0Lesser\0General\0Public\0License\0as\0published\0by\0the}}
\CE{}\L{\LB{\C{}\1\1\0Free\0Software\0\0Foundation;\0either\0\0version\02.1\0of\0\0the\0License,\0or\0\0(at\0your}}
\CE{}\L{\LB{\C{}\1\1\0option)\0any\0later\0version.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0This\0library\0is\0distributed\0in\0the\0\0hope\0that\0it\0will\0be\0useful,\0but\0WITHOUT}}
\CE{}\L{\LB{\C{}\1\1\0ANY\0\0WARRANTY;\0\0without\0even\0\0the\0\0implied\0\0warranty\0\0of\0MERCHANTABILITY\0\0or}}
\CE{}\L{\LB{\C{}\1\1\0FITNESS\0FOR\0A\0PARTICULAR\0PURPOSE.\0\0See\0the\0GNU\0Lesser\0General\0Public\0License}}
\CE{}\L{\LB{\C{}\1\1\0for\0more\0details.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0You\0should\0\0have\0received\0a\0\0copy\0of\0the\0\0GNU\0Lesser\0General\0\0Public\0License}}
\CE{}\L{\LB{\C{}\1\1\0along\0\0with\0this\0library.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{}}
\L{\LB{\K{\#include}\0\<\V{uSemaphore}.\V{h}\>}}
\L{\LB{}}
\L{\LB{\K{template}\<\K{typename}\0\V{ELEMTYPE}\>\0\K{class}\0\V{BoundedBuffer}\0\{}}
\L{\LB{}\Tab{4}{\K{const}\0\K{int}\0\V{size};}\Tab{56}{\C{}\1\1\0number\0of\0buffer\0elements}}
\CE{}\L{\LB{}\Tab{4}{\K{int}\0\V{front},\0\V{back};}\Tab{56}{\C{}\1\1\0position\0of\0front\0and\0back\0of\0queue}}
\CE{}\L{\LB{}\Tab{4}{\V{uSemaphore}\0\V{full},\0\V{empty};}\Tab{56}{\C{}\1\1\0synchronize\0for\0full\0and\0empty\0BoundedBuffer}}
\CE{}\L{\LB{}\Tab{4}{\V{uSemaphore}\0\V{ilock},\0\V{rlock};}\Tab{56}{\C{}\1\1\0insertion\0and\0removal\0locks}}
\CE{}\L{\LB{}\Tab{4}{\V{ELEMTYPE}\0\*\V{Elements};}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{BoundedBuffer}(\0\K{const}\0\V{BoundedBuffer}\0\&\0)\0=\0\K{delete};}\Tab{56}{\C{}\1\1\0no\0copy}}
\CE{}\L{\LB{}\Tab{4}{\V{BoundedBuffer}(\0\V{BoundedBuffer}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{}\Tab{4}{\V{BoundedBuffer}\0\&\0\K{operator}=(\0\K{const}\0\V{BoundedBuffer}\0\&\0)\0=\0\K{delete};\0\C{}\1\1\0no\0assignment}}
\CE{}\L{\LB{}\Tab{4}{\V{BoundedBuffer}\0\&\0\K{operator}=(\0\V{BoundedBuffer}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{BoundedBuffer}(\0\K{const}\0\K{unsigned}\0\K{int}\0\V{size}\0=\010\0)\0:\0\V{size}(\0\V{size}\0),\0\V{full}(\00\0),\0\V{empty}(\0\V{size}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{front}\0=\0\V{back}\0=\00;}}
\L{\LB{}\Tab{8}{\V{Elements}\0=\0\K{new}\0\V{ELEMTYPE}[\V{size}];}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\~\V{BoundedBuffer}()\0\{}}
\L{\LB{}\Tab{8}{\K{delete}\0\0\V{Elements};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::\~BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{void}\0\V{insert}(\0\V{ELEMTYPE}\0\V{elem}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{empty}.\V{P}();}\Tab{56}{\C{}\1\1\0wait\0if\0queue\0is\0full}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{8}{\V{ilock}.\V{P}();}\Tab{56}{\C{}\1\1\0serialize\0insertion}}
\CE{}\L{\LB{}\Tab{8}{\V{Elements}[\V{back}]\0=\0\V{elem};}}
\L{\LB{}\Tab{8}{\V{back}\0=\0(\0\V{back}\0+\01\0)\0\%\0\V{size};}}
\L{\LB{}\Tab{8}{\V{ilock}.\V{V}();}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\V{full}.\V{V}();}\Tab{56}{\C{}\1\1\0signal\0a\0full\0queue\0space}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::insert}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{ELEMTYPE}\0\V{remove}()\0\{}}
\L{\LB{}\Tab{8}{\V{ELEMTYPE}\0\V{elem};}}
\L{\LB{}\Tab{8}{}}
\L{\LB{}\Tab{8}{\V{full}.\V{P}();}\Tab{56}{\C{}\1\1\0wait\0if\0queue\0is\0empty}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{8}{\V{rlock}.\V{P}();}\Tab{56}{\C{}\1\1\0serialize\0removal}}
\CE{}\L{\LB{}\Tab{8}{\V{elem}\0=\0\V{Elements}[\V{front}];}}
\L{\LB{}\Tab{8}{\V{front}\0=\0(\0\V{front}\0+\01\0)\0\%\0\V{size};}}
\L{\LB{}\Tab{8}{\V{rlock}.\V{V}();}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\V{empty}.\V{V}();}\Tab{56}{\C{}\1\1\0signal\0empty\0queue\0space}}
\CE{}\L{\LB{}\Tab{8}{\K{return}\0\V{elem};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0BoundedBuffer::remove}}
\CE{}\L{\LB{\};\0\C{}\1\1\0BoundedBuffer}}
\CE{}\L{\LB{}}
\L{\LB{\K{\#include}\0\S{}\"ProdConsDriver.i\"\SE{}}}
\L{\LB{}}
\L{\LB{\C{}\1\1\0Local\0Variables:\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0tab\-width:\04\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0compile\-command:\0\"u++\0SemaphoreBB.cc\"\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0End:\0\1\1}}
\CE{}