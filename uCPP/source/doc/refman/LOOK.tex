% Remember to use the lgrind style

\File{\1u0\1usystem\1software\1u++\-7.0.0\1src\1examples\1LOOK.cc},{13:33},{Nov 12 2020}
\L{\LB{\C{}\1\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\-\*\-\0Mode:\0C++\0\-\*\-\0}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0uC++\0Version\07.0.0,\0Copyright\0(C)\0Peter\0A.\0Buhr\01994}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0LOOK.cc\0\-\-\0Look\0Disk\0Scheduling\0Algorithm}}
\CE{}\L{\LB{\C{}\1\1}}
\CE{}\L{\LB{\C{}\1\1\0The\0LOOK\0disk\0scheduling\0algorithm\0causes\0the\0disk\0arm\0to\0sweep\0bidirectionally\0across\0the\0disk\0surface\0until\0there}}
\CE{}\L{\LB{\C{}\1\1\0are\0no\0more\0requests\0in\0that\0particular\0direction,\0servicing\0all\0requests\0in\0its\0path.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0Author\0\0\0\0\0\0\0\0\0\0\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Created\0On\0\0\0\0\0\0\0:\0Thu\0Aug\029\021:46:11\01991}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0By\0:\0Peter\0A.\0Buhr}}
\CE{}\L{\LB{\C{}\1\1\0Last\0Modified\0On\0:\0Thu\0Nov\012\013:33:58\02020}}
\CE{}\L{\LB{\C{}\1\1\0Update\0Count\0\0\0\0\0:\0288}}
\CE{}\L{\LB{\C{}\1\1}}
\CE{}\L{\LB{\C{}\1\1\0This\0\0library\0is\0free\0\0software;\0you\0\0can\0redistribute\0\0it\0and\1or\0\0modify\0it}}
\CE{}\L{\LB{\C{}\1\1\0under\0the\0terms\0of\0the\0GNU\0Lesser\0General\0Public\0License\0as\0published\0by\0the}}
\CE{}\L{\LB{\C{}\1\1\0Free\0Software\0\0Foundation;\0either\0\0version\02.1\0of\0\0the\0License,\0or\0\0(at\0your}}
\CE{}\L{\LB{\C{}\1\1\0option)\0any\0later\0version.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0This\0library\0is\0distributed\0in\0the\0\0hope\0that\0it\0will\0be\0useful,\0but\0WITHOUT}}
\CE{}\L{\LB{\C{}\1\1\0ANY\0\0WARRANTY;\0\0without\0even\0\0the\0\0implied\0\0warranty\0\0of\0MERCHANTABILITY\0\0or}}
\CE{}\L{\LB{\C{}\1\1\0FITNESS\0FOR\0A\0PARTICULAR\0PURPOSE.\0\0See\0the\0GNU\0Lesser\0General\0Public\0License}}
\CE{}\L{\LB{\C{}\1\1\0for\0more\0details.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{\C{}\1\1\0You\0should\0\0have\0received\0a\0\0copy\0of\0the\0\0GNU\0Lesser\0General\0\0Public\0License}}
\CE{}\L{\LB{\C{}\1\1\0along\0\0with\0this\0library.}}
\CE{}\L{\LB{\C{}\1\1\0}}
\CE{}\L{\LB{}}
\L{\LB{\K{\#include}\0\<\V{iostream}\>}}
\L{\LB{\K{using}\0\V{std}::\V{cout};}}
\L{\LB{\K{using}\0\V{std}::\V{osacquire};}}
\L{\LB{\K{using}\0\V{std}::\V{endl};}}
\L{\LB{}}
\L{\LB{\K{typedef}\0\K{char}\0\V{Buffer}[50];}\Tab{56}{\C{}\1\1\0dummy\0data\0buffer}}
\CE{}\L{\LB{}}
\L{\LB{\K{const}\0\K{int}\0\V{NoOfCylinders}\0=\0100;}}
\L{\LB{\K{enum}\0\V{IOStatus}\0\{\0\V{IO\_COMPLETE},\0\V{IO\_ERROR}\0\};}}
\L{\LB{}}
\L{\LB{\K{class}\0\V{IORequest}\0\{}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\K{int}\0\V{track};}}
\L{\LB{}\Tab{4}{\K{int}\0\V{sector};}}
\L{\LB{}\Tab{4}{\V{Buffer}\0\*\V{bufadr};}}
\L{\LB{}\Tab{4}{\V{IORequest}()\0\{\}}}
\L{\LB{}\Tab{4}{\V{IORequest}(\0\K{int}\0\V{track},\0\K{int}\0\V{sector},\0\V{Buffer}\0\*\V{bufadr}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{IORequest}::\V{track}\0=\0\V{track};}}
\L{\LB{}\Tab{8}{\V{IORequest}::\V{sector}\0=\0\V{sector};}}
\L{\LB{}\Tab{8}{\V{IORequest}::\V{bufadr}\0=\0\V{bufadr};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0IORequest::IORequest}}
\CE{}\L{\LB{\};\0\C{}\1\1\0IORequest}}
\CE{}\L{\LB{}}
\L{\LB{\K{class}\0\V{WaitingRequest}\0:\0\K{public}\0\V{uSeqable}\0\{}\Tab{56}{\C{}\1\1\0element\0for\0a\0waiting\0request\0list}}
\CE{}\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}(\0\K{const}\0\V{WaitingRequest}\0\&\0)\0=\0\K{delete};}\Tab{56}{\C{}\1\1\0no\0copy}}
\CE{}\L{\LB{}\Tab{4}{\V{WaitingRequest}(\0\V{WaitingRequest}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\&\0\K{operator}=(\0\K{const}\0\V{WaitingRequest}\0\&\0)\0=\0\K{delete};\0\C{}\1\1\0no\0assignment}}
\CE{}\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\&\0\K{operator}=(\0\V{WaitingRequest}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{uCondition}\0\V{block};}}
\L{\LB{}\Tab{4}{\V{IOStatus}\0\V{status};}}
\L{\LB{}\Tab{4}{\V{IORequest}\0\V{req};}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}(\0\V{IORequest}\0\V{req}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{WaitingRequest}::\V{req}\0=\0\V{req};}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{\};\0\C{}\1\1\0WaitingRequest}}
\CE{}\L{\LB{}}
\L{\LB{\K{class}\0\V{Elevator}\0:\0\K{public}\0\V{uSequence}\<\V{WaitingRequest}\>\0\{}}
\L{\LB{}\Tab{4}{\K{int}\0\V{Direction};}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\*\V{Current};}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{Elevator}(\0\K{const}\0\V{Elevator}\0\&\0)\0=\0\K{delete};}\Tab{56}{\C{}\1\1\0no\0copy}}
\CE{}\L{\LB{}\Tab{4}{\V{Elevator}(\0\V{Elevator}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{}\Tab{4}{\V{Elevator}\0\&\0\K{operator}=(\0\K{const}\0\V{Elevator}\0\&\0)\0=\0\K{delete};}\Tab{56}{\C{}\1\1\0no\0assignment}}
\CE{}\L{\LB{}\Tab{4}{\V{Elevator}\0\&\0\K{operator}=(\0\V{Elevator}\0\&\&\0)\0=\0\K{delete};}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{Elevator}()\0\{}}
\L{\LB{}\Tab{8}{\V{Direction}\0=\01;}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0Elevator::Elevator}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{void}\0\V{orderedInsert}(\0\V{WaitingRequest}\0\*\V{np}\0)\0\{}}
\L{\LB{}\Tab{8}{\V{WaitingRequest}\0\*\V{lp};}}
\L{\LB{}\Tab{8}{\K{for}\0(\0\V{lp}\0=\0\V{head}();}\Tab{56}{\C{}\1\1\0insert\0in\0ascending\0order\0by\0track\0number}}
\CE{}\L{\LB{}\Tab{12}{\0\V{lp}\0!=\00\0\&\&\0\V{lp}\-\>\V{req}.\V{track}\0\<\0\V{np}\-\>\V{req}.\V{track};}}
\L{\LB{}\Tab{12}{\0\V{lp}\0=\0\V{succ}(\0\V{lp}\0)\0);}}
\L{\LB{}\Tab{8}{\K{if}\0(\0\V{empty}()\0)\0\V{Current}\0=\0\V{np};}\Tab{56}{\C{}\1\1\01st\0client,\0so\0set\0Current}}
\CE{}\L{\LB{}\Tab{8}{\V{insertBef}(\0\V{np},\0\V{lp}\0);}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0Elevator::orderedInsert}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\*\V{remove}()\0\{}}
\L{\LB{}\Tab{8}{\V{WaitingRequest}\0\*\V{temp}\0=\0\V{Current};}\Tab{56}{\C{}\1\1\0advance\0to\0next\0waiting\0client}}
\CE{}\L{\LB{}\Tab{8}{\V{Current}\0=\0\V{Direction}\0?\0\V{succ}(\0\V{Current}\0)\0:\0\V{pred}(\0\V{Current}\0);}}
\L{\LB{}\Tab{8}{\V{uSequence}\<\V{WaitingRequest}\>::\V{remove}(\0\V{temp}\0);}\Tab{56}{\C{}\1\1\0remove\0request}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{8}{\K{if}\0(\0\V{Current}\0==\00\0)\0\{}\Tab{56}{\C{}\1\1\0reverse\0direction\0?}}
\CE{}\L{\LB{}\Tab{12}{\V{osacquire}(\0\V{cout}\0)\0\<\<\0\S{}\"Turning\"\SE{}\0\<\<\0\V{endl};}}
\L{\LB{}\Tab{12}{\V{Direction}\0=\0!\V{Direction};}}
\L{\LB{}\Tab{12}{\V{Current}\0=\0\V{Direction}\0?\0\V{head}()\0:\0\V{tail}();}}
\L{\LB{}\Tab{8}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}\Tab{8}{\K{return}\0\V{temp};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0Elevator::remove}}
\CE{}\L{\LB{\};\0\C{}\1\1\0Elevator}}
\CE{}\L{\LB{}}
\L{\LB{\K{\_Task}\0\V{DiskScheduler};}}
\L{\LB{}}
\L{\LB{\K{\_Task}\0\V{Disk}\0\{}}
\L{\LB{}\Tab{4}{\V{DiskScheduler}\0\&\V{scheduler};}}
\L{\LB{}\Tab{4}{\K{void}\0\V{main}();}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{Disk}(\0\V{DiskScheduler}\0\&\V{scheduler}\0)\0:\0\V{scheduler}(\0\V{scheduler}\0)\0\{}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0Disk}}
\CE{}\L{\LB{\};\0\C{}\1\1\0Disk}}
\CE{}\L{\LB{}}
\L{\LB{\K{\_Task}\0\V{DiskScheduler}\0\{}}
\L{\LB{}\Tab{4}{\V{Elevator}\0\V{PendingClients};}\Tab{56}{\C{}\1\1\0ordered\0list\0of\0client\0requests}}
\CE{}\L{\LB{}\Tab{4}{\V{uCondition}\0\V{DiskWaiting};}\Tab{56}{\C{}\1\1\0disk\0waits\0here\0if\0no\0work}}
\CE{}\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\*\V{CurrentRequest};}\Tab{56}{\C{}\1\1\0request\0being\0serviced\0by\0disk}}
\CE{}\L{\LB{}\Tab{4}{\V{Disk}\0\V{disk};}\Tab{56}{\C{}\1\1\0start\0the\0disk}}
\CE{}\L{\LB{}\Tab{4}{\V{IORequest}\0\V{req};}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\V{diskterm};}\Tab{56}{\C{}\1\1\0preallocate\0disk\0termination\0request}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{void}\0\V{main}();}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{DiskScheduler}()\0:\0\V{disk}(\0\*\K{this}\0),\0\V{req}(\0\-1,\00,\00\0),\0\V{diskterm}(\0\V{req}\0)\0\{}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0DiskScheduler}}
\CE{}\L{\LB{}\Tab{4}{\V{IORequest}\0\V{WorkRequest}(\0\V{IOStatus}\0);}}
\L{\LB{}\Tab{4}{\V{IOStatus}\0\V{DiskRequest}(\0\V{IORequest}\0\&\0);}}
\L{\LB{\};\0\C{}\1\1\0DiskScheduler}}
\CE{}\L{\LB{}}
\L{\LB{\K{\_Task}\0\V{DiskClient}\0\{}}
\L{\LB{}\Tab{4}{\V{DiskScheduler}\0\&\V{scheduler};}}
\L{\LB{}\Tab{4}{\K{void}\0\V{main}();}}
\L{\LB{\0\0\K{public}:}}
\L{\LB{}\Tab{4}{\V{DiskClient}(\0\V{DiskScheduler}\0\&\V{scheduler}\0)\0:\0\V{scheduler}(\0\V{scheduler}\0)\0\{}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0DiskClient}}
\CE{}\L{\LB{\};\0\C{}\1\1\0DiskClient}}
\CE{}\L{\LB{}}
\L{\LB{\K{void}\0\V{Disk}::\V{main}()\0\{}}
\L{\LB{}\Tab{4}{\V{IOStatus}\0\V{status};}}
\L{\LB{}\Tab{4}{\V{IORequest}\0\V{work};}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{status}\0=\0\V{IO\_COMPLETE};}}
\L{\LB{}\Tab{4}{\K{for}\0(\0;;\0)\0\{}}
\L{\LB{}\Tab{8}{\V{work}\0=\0\V{scheduler}.\V{WorkRequest}(\0\V{status}\0);}}
\L{\LB{}\Tab{4}{\0\0\K{if}\0(\0\V{work}.\V{track}\0==\0\-1\0)\0\K{break};}}
\L{\LB{}\Tab{8}{\V{osacquire}(\0\V{cout}\0)\0\<\<\0\S{}\"Disk\0main,\0track:\"\SE{}\0\<\<\0\V{work}.\V{track}\0\<\<\0\V{endl};}}
\L{\LB{}\Tab{8}{\V{yield}(\0100\0);}\Tab{56}{\C{}\1\1\0pretend\0to\0perform\0an\0I\1O\0operation}}
\CE{}\L{\LB{}\Tab{8}{\V{status}\0=\0\V{IO\_COMPLETE};}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0for}}
\CE{}\L{\LB{\}\0\C{}\1\1\0Disk::main}}
\CE{}\L{\LB{}}
\L{\LB{\K{void}\0\V{DiskScheduler}::\V{main}()\0\{}}
\L{\LB{}\Tab{4}{\V{uSeqIter}\<\V{WaitingRequest}\>\0\V{iter};}\Tab{56}{\C{}\1\1\0declared\0here\0because\0of\0gcc\0compiler\0bug}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{CurrentRequest}\0=\0\K{nullptr};}\Tab{60}{\C{}\1\1\0no\0current\0request\0at\0start}}
\CE{}\L{\LB{}\Tab{4}{\K{for}\0(\0;;\0)\0\{}}
\L{\LB{}\Tab{8}{\K{\_Accept}(\0\~\V{DiskScheduler}\0)\0\{}\Tab{56}{\C{}\1\1\0request\0from\0system}}
\CE{}\L{\LB{}\Tab{12}{\K{break};}}
\L{\LB{}\Tab{8}{\}\0\K{or}\0\K{\_Accept}(\0\V{WorkRequest}\0)\0\{}\Tab{56}{\C{}\1\1\0request\0from\0disk}}
\CE{}\L{\LB{}\Tab{8}{\}\0\K{or}\0\K{\_Accept}(\0\V{DiskRequest}\0)\0\{}\Tab{56}{\C{}\1\1\0request\0from\0clients}}
\CE{}\L{\LB{}\Tab{8}{\}\0\C{}\1\1\0\_Accept}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0for}}
\CE{}\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}\1\1\0two\0alternatives\0for\0terminating\0scheduling\0server}}
\CE{}\L{\LB{\K{\#if}\00}}
\L{\LB{}\Tab{4}{\K{for}\0(\0;\0!\0\V{PendingClients}.\V{empty}();\0)\0\{}\Tab{56}{\C{}\1\1\0service\0pending\0disk\0requests\0before\0terminating}}
\CE{}\L{\LB{}\Tab{8}{\K{\_Accept}(\0\V{WorkRequest}\0);}}
\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0for}}
\CE{}\L{\LB{\K{\#else}}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\*\V{client};}\Tab{56}{\C{}\1\1\0cancel\0pending\0disk\0requests\0before\0terminating}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{for}\0(\0\V{iter}.\V{over}(\V{PendingClients});\0\V{iter}\0\>\>\0\V{client};\0)\0\{}}
\L{\LB{}\Tab{8}{\V{PendingClients}.\V{remove}();}\Tab{56}{\C{}\1\1\0remove\0each\0client\0from\0the\0list}}
\CE{}\L{\LB{}\Tab{8}{\V{client}\-\>\V{status}\0=\0\V{IO\_ERROR};}\Tab{56}{\C{}\1\1\0set\0failure\0status}}
\CE{}\L{\LB{}\Tab{8}{\V{client}\-\>\V{block}.\V{signal}();}\Tab{56}{\C{}\1\1\0restart\0client}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0for}}
\CE{}\L{\LB{\K{\#endif}}}
\L{\LB{}\Tab{4}{\C{}\1\1\0pending\0client\0list\0is\0now\0empty}}
\CE{}\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}\1\1\0stop\0disk}}
\CE{}\L{\LB{}\Tab{4}{\V{PendingClients}.\V{orderedInsert}(\0\&\V{diskterm}\0);}\Tab{56}{\C{}\1\1\0insert\0disk\0terminate\0request\0on\0list}}
\CE{}\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{if}\0(\0!\0\V{DiskWaiting}.\V{empty}()\0)\0\{}\Tab{56}{\C{}\1\1\0disk\0free\0?}}
\CE{}\L{\LB{}\Tab{8}{\V{DiskWaiting}.\V{signal}();}\Tab{56}{\C{}\1\1\0wake\0up\0disk\0to\0deal\0with\0termination\0request}}
\CE{}\L{\LB{}\Tab{4}{\}\0\K{else}\0\{}}
\L{\LB{}\Tab{8}{\K{\_Accept}(\0\V{WorkRequest}\0);}\Tab{56}{\C{}\1\1\0wait\0for\0current\0disk\0operation\0to\0complete}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{\}\0\C{}\1\1\0DiskScheduler::main}}
\CE{}\L{\LB{}}
\L{\LB{\V{IOStatus}\0\V{DiskScheduler}::\V{DiskRequest}(\0\V{IORequest}\0\&\V{req}\0)\0\{}}
\L{\LB{}\Tab{4}{\V{WaitingRequest}\0\V{np}(\0\V{req}\0);}\Tab{56}{\C{}\1\1\0preallocate\0waiting\0list\0element}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{PendingClients}.\V{orderedInsert}(\0\&\V{np}\0);}\Tab{56}{\C{}\1\1\0insert\0in\0ascending\0order\0by\0track\0number}}
\CE{}\L{\LB{}\Tab{4}{\K{if}\0(\0!\0\V{DiskWaiting}.\V{empty}()\0)\0\{}\Tab{56}{\C{}\1\1\0disk\0free\0?}}
\CE{}\L{\LB{}\Tab{8}{\V{DiskWaiting}.\V{signal}();}\Tab{56}{\C{}\1\1\0reactivate\0disk}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{np}.\V{block}.\V{wait}();}\Tab{56}{\C{}\1\1\0wait\0until\0request\0is\0serviced}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{return}\0\V{np}.\V{status};}\Tab{56}{\C{}\1\1\0return\0status\0of\0disk\0request}}
\CE{}\L{\LB{\}\0\C{}\1\1\0DiskScheduler::DiskRequest}}
\CE{}\L{\LB{}}
\L{\LB{\V{IORequest}\0\V{DiskScheduler}::\V{WorkRequest}(\0\V{IOStatus}\0\V{status}\0)\0\{}}
\L{\LB{}\Tab{4}{\K{if}\0(\0\V{CurrentRequest}\0!=\0\K{nullptr}\0)\0\{}\Tab{60}{\C{}\1\1\0client\0waiting\0for\0request\0to\0complete\0?}}
\CE{}\L{\LB{}\Tab{8}{\V{CurrentRequest}\-\>\V{status}\0=\0\V{status};}\Tab{56}{\C{}\1\1\0set\0request\0status}}
\CE{}\L{\LB{}\Tab{8}{\V{CurrentRequest}\-\>\V{block}.\V{ignal}();}\Tab{56}{\C{}\1\1\0reactivate\0waiting\0client}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\K{if}\0(\0\V{PendingClients}.\V{empty}()\0)\0\{}\Tab{56}{\C{}\1\1\0any\0clients\0waiting\0?}}
\CE{}\L{\LB{}\Tab{8}{\V{DiskWaiting}.\V{wait}();}\Tab{56}{\C{}\1\1\0wait\0for\0client\0to\0arrive}}
\CE{}\L{\LB{}\Tab{4}{\}\0\C{}\1\1\0if}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{CurrentRequest}\0=\0\V{PendingClients}.\V{remove}();}\Tab{56}{\C{}\1\1\0remove\0next\0client\'s\0request}}
\CE{}\L{\LB{}\Tab{4}{\K{return}\0\V{CurrentRequest}\-\>\V{req};}\Tab{56}{\C{}\1\1\0return\0work\0for\0disk}}
\CE{}\L{\LB{\}\0\C{}\1\1\0DiskScheduler::WorkRequest}}
\CE{}\L{\LB{}}
\L{\LB{\K{void}\0\V{DiskClient}::\V{main}()\0\{}}
\L{\LB{}\Tab{4}{\V{IOStatus}\0\V{status};}}
\L{\LB{}\Tab{4}{\V{IORequest}\0\V{req}(\0\V{rand}()\0\%\0\V{NoOfCylinders},\00,\00\0);}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{yield}(\0\V{rand}()\0\%\0100\0);}\Tab{56}{\C{}\1\1\0don\'t\0all\0start\0at\0the\0same\0time}}
\CE{}\L{\LB{}\Tab{4}{\V{osacquire}(\0\V{cout}\0)\0\<\<\0\S{}\"enter\0DiskClient\0main\0seeking:\"\SE{}\0\<\<\0\V{req}.\V{track}\0\<\<\0\V{endl};}}
\L{\LB{}\Tab{4}{\V{status}\0=\0\V{scheduler}.\V{DiskRequest}(\0\V{req}\0);}}
\L{\LB{}\Tab{4}{\V{osacquire}(\0\V{cout}\0)\0\<\<\0\S{}\"enter\0DiskClient\0main\0seeked\0to:\"\SE{}\0\<\<\0\V{req}.\V{track}\0\<\<\0\V{endl};}}
\L{\LB{\}\0\C{}\1\1\0DiskClient::main}}
\CE{}\L{\LB{}}
\L{\LB{\K{int}\0\V{main}()\0\{}}
\L{\LB{}\Tab{4}{\K{const}\0\K{int}\0\V{NoOfTests}\0=\020;}}
\L{\LB{}\Tab{4}{\V{DiskScheduler}\0\V{scheduler};}\Tab{56}{\C{}\1\1\0start\0the\0disk\0scheduler}}
\CE{}\L{\LB{}\Tab{4}{\V{DiskClient}\0\*\V{p};}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{srand}(\0\V{getpid}()\0);}\Tab{56}{\C{}\1\1\0initialize\0random\0number\0generator}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{p}\0=\0\K{new}\0\V{DiskClient}[\V{NoOfTests}](\0\V{scheduler}\0);}\Tab{56}{\C{}\1\1\0start\0the\0clients}}
\CE{}\L{\LB{}\Tab{4}{\K{delete}\0[\,]\0\V{p};}\Tab{56}{\C{}\1\1\0wait\0for\0clients\0to\0complete}}
\CE{}\L{\LB{}}
\L{\LB{}\Tab{4}{\V{cout}\0\<\<\0\S{}\"successful\0completion\"\SE{}\0\<\<\0\V{endl};}}
\L{\LB{\}\0\C{}\1\1\0main}}
\CE{}\L{\LB{}}
\L{\LB{\C{}\1\1\0Local\0Variables:\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0tab\-width:\04\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0compile\-command:\0\"u++\0LOOK.cc\"\0\1\1}}
\CE{}\L{\LB{\C{}\1\1\0End:\0\1\1}}
\CE{}